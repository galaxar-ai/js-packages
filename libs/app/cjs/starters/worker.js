"use strict";async function startWorker(worker,options){const{workerName,dontStop,initializer,uninitializer,throwOnError,verbose,...appOptions}=options||{};if(verbose){appOptions.logger={...appOptions.logger,level:"verbose"}}const App=require("..");let app=new App(workerName||"worker",appOptions);try{await app.start_();if(initializer){await initializer(app)}const result=await worker(app);if(!dontStop){await app.stop_()}if(uninitializer){await uninitializer()}return result}catch(error){if(throwOnError){throw error}console.error(error.message||error);process.exit(1)}}module.exports=startWorker;
//# sourceMappingURL=worker.js.map